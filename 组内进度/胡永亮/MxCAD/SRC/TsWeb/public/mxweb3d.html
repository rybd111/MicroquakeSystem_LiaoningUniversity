<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <script language="javascript" type="text/javascript" src="mxconfig.js"></script>
    <script language="javascript" type="text/javascript">

        var uiObj = undefined;
        var MxFun = undefined;
        var McEdJigCommand = undefined;
        var mxCmdManager = undefined;
        var AcquireStatus;
        var DragStatus;
        var DoneStatius;
        var InType;
        var MouseButton;
        var THREE;
        function MxUiMain(req) {
            MxFun = req("./MxFun").MxFun;
         
        
            MxFun.createMxUiObject(function (mxuiObj) {
                uiObj = mxuiObj;        
                uiObj.isShowToolbar = true;
                uiObj.isShowLayer = true;
                uiObj.isShowMainMenu = true;
                uiObj.isShowTitle = true;
                uiObj.isEnableLoading = true;
                uiObj.isEnableObjectProperty = true;

                uiObj.addToolBarItem("test.png", "测试命令", "mx_test()");

                if(MxFun.is2dParam() )
                {
                    uiObj.addMenuItem('2D功能测试',"",1);
                    uiObj.addMenuItem('删除所有绘制',"mx_deleteAll()",101,1);
                    uiObj.addMenuItem('undo',"mx_undo()",102,1);
                    uiObj.addMenuItem('2dDraw',"test2dDraw()",103,1);
                    uiObj.addMenuItem('动态画点',"my2d_dynDrawPoint()",104,1);
                    uiObj.addMenuItem('动态画线',"my2d_dynDrawLine()",105,1);
                    uiObj.addMenuItem('动态画圆',"my2d_dynDrawCircle()",106,1);
                    uiObj.addMenuItem('动态画矩形',"my2d_dynDrawRect()",107,1);
                    uiObj.addMenuItem('得到所有点坐标',"my2d_getAllDrawPoint()",108,1);

                    uiObj.addMenuItem('测试取所有对象',"mx2d_getAllObject()",109,1);
                    uiObj.addMenuItem('测量距离',"my2d_dynDrawLenMark()",110,1);
                    uiObj.addMenuItem('显示或隐藏图层',"testHideLayer()",111,1);
                    uiObj.addMenuItem('测试Three.js画线',"threejs_drawLine()",112,1);
                }
                else
                {
                    uiObj.addMenuItem('3D功能测试',"",2);
                    uiObj.addMenuItem('删除所有绘制',"mx_deleteAll()",201,2);
                    uiObj.addMenuItem('undo',"mx_undo()",202,2);
                    uiObj.addMenuItem('save',"mx_save()",203,2);
                    uiObj.addMenuItem('3dDraw',"mx3d_testdraw()",204,2);
                    uiObj.addMenuItem('3d运算',"mx3d_testoperation()",205,2);
                    uiObj.addMenuItem('创建窗户',"mx3d_createWindow()",206,2);
                    uiObj.addMenuItem('阳光房',"mx3d_sunnyRoom()",207,2);
                    uiObj.addMenuItem('弧形窗',"mx3d_arcwindow()",208,2);
                    uiObj.addMenuItem('截面窗户',"mx3d_secwindow()",209,2);
                    uiObj.addMenuItem('绘制文字',"mx3d_drawTextTest()",210,2);
                    uiObj.addMenuItem('形位变换',"mx3d_testTransf()",211,2);

                    uiObj.addMenuItem('TestDraw',"mx3d_3dDraw()",212,2);
                    uiObj.addMenuItem('TempTest',"mx3d_test()",213,2);
                }

            });
        }

        function MxMain(require) {
            MxFun = require("./MxFun").MxFun;
            THREE = MxFun.getTHREE();

            mxCmdManager = require("./MxJigCmdManager").MxCommandManager;
            McEdJigCommand = mxCmdManager.getMcEdJigCommandClass();

            AcquireStatus = mxCmdManager.AcquireStatus;
            DragStatus = mxCmdManager.DragStatus;
            DoneStatius = mxCmdManager.DoneStatius;
            InType = mxCmdManager.InType;
            MouseButton = mxCmdManager.MouseButton;

            MxFun.setMxServer(mxserver);
            MxFun.createMxObject();
                  
            if(MxFun.getUiObj() != null && MxFun.isPC())
            {
               
                MxFun.addSelectEvent(
                    function (id) {

                    var param = '[' + id + ']';
                    MxFun.call("mx_getobjectprop",param,function (data) {
                        if(data.length != 0 )
                            MxFun.showProp(data);
                        return 1;
                    })
                }
                );
                
            }

            document.body.addEventListener('touchmove', function (e) {
                e.preventDefault()
            }, { passive: false })

            return 0;
        }

    </script>

    <script language="javascript" type="text/javascript" src="js/jquery.js"></script>
    <script language="javascript" type="text/javascript" src="js/mxfun.min.js"></script>
    <script language="javascript" type="text/javascript" src="user/mx2d.js"></script>
    <script language="javascript" type="text/javascript" src="user/mx3d.js"></script>
    <script language="javascript" type="text/javascript" src="user/threejsfun.js"></script>
</head>

<body style="overflow-x:hidden; overflow-y:hidden">
    <script>

        function MxDatabaseTest() {
            MxFun.call('getDatabase', "[]", function (ret) {
                console.log(ret);
            });
        }

        function MxVectorTest() {
            MxFun.call('getVector', "[]", function (ret) {
                console.log(ret);
            });
        }

        function MxMatrixTest() {
            MxFun.call('getMatrix', "[]", function (ret) {
                console.log(ret);
            });
        }

        function test2dDraw() {
            MxFun.call('test2dDraw', "[]", function (ret) {
                console.log(ret);
            });
        }

        function testBlockTb() {
            MxFun.call('testBlockTb', "[]", function (ret) {
                console.log(ret);
            });
        }

        function testDimStyleTb() {
            MxFun.call('testDimStyleTb', "[]", function (ret) {
                console.log(ret);
            });
        }

        function testLayerTb() {
            MxFun.call('testLayerTb', "[]", function (ret) {
                console.log(ret);
            });
        }

        function testLineTypeTb() {
            MxFun.call('testLineTypeTb', "[]", function (ret) {
                console.log(ret);
            });
        }

        function testTextStyle() {
            MxFun.call('testTextStyle', "[]", function (ret) {
                console.log(ret);
            });
        }

        function testObject() {
            MxFun.call('testObject', "[]", function (ret) {
                console.log(ret);
            });
        }

        function testEntity() {
            MxFun.call('testEntity', "[]", function (ret) {
                console.log(ret);
            });
        }

        function testEllipse() {
            MxFun.call('testEllipse', "[]", function (ret) {
                console.log(ret);
            });
        }

        function testText() {
            MxFun.call('testText', "[]", function (ret) {
                console.log(ret);
            });
        }

        function testResBuf() {
            MxFun.call('testResBuf', "[]", function (ret) {
                console.log(ret);
            });
        }

        function testEntResBuf() {
            MxFun.call('testEntResBuf', "[]", function (ret) {
                console.log(ret);
            });
        }



        function testDimBase() {
            MxFun.call('testDimBase', "[]", function (ret) {
                console.log(ret);
            });
        }
        
        function testAlignedDim() {
            MxFun.call('testAlignedDim', "[]", function (ret) {
                console.log(ret);
            });
        }

        function testRotatedDim() {
            MxFun.call('testRotatedDim', "[]", function (ret) {
                console.log(ret);
            });
        }

        function testThreePtAngularDim() {
            MxFun.call('testThreePtAngularDim', "[]", function (ret) {
                console.log(ret);
            });
        }

        function testTwoLineAngularDim() {
            MxFun.call('testTwoLineAngularDim', "[]", function (ret) {
                console.log(ret);
            });
        }

        function testDiametricDim() {
            MxFun.call('testDiametricDim', "[]", function (ret) {
                console.log(ret);
            });
        }
        
        function testOrdinateDim() {
            MxFun.call('testOrdinateDim', "[]", function (ret) {
                console.log(ret);
            });
        }
        
        function testRadialDim() {
            MxFun.call('testRadialDim', "[]", function (ret) {
                console.log(ret);
            });
        }
        
        function testArcDim() {
            MxFun.call('testArcDim', "[]", function (ret) {
                console.log(ret);
            });
        }
        
        function testRadiaDimLarge() {
            MxFun.call('testRadiaDimLarge', "[]", function (ret) {
                console.log(ret);
            });
        }
        
        function testSelSet() {
            MxFun.call('testSelSet', "[]", function (ret) {
                console.log(ret);
            });
        }
        
        function  mx3d_testdraw() {
            MxFun.call('Test3dDraw','[100, 10, 0]',function (ret) {
                console.log(ret);
            });
        }

        function mx3d_testoperation() {

            MxFun.call('Testoperation', '[100, 10, 0]', function (ret) {
                console.log(ret);
            });
        }


        function mx3d_createWindow() {

            MxFun.call('createWindow', '[]', function (ret) {
                console.log(ret);
            });
        }

        function mx3d_test() {

            MxFun.call('Test3d','[""]',function (ret) {
                console.log(ret);
            });

        }
        function mx3d_sunnyRoom(){

            MxFun.call('sunnyRoom', '[]', function (ret) {
                console.log(ret);
            });
        }

        function mx3d_arcwindow(){

            MxFun.call('arcwindow', '[]', function (ret) {
                console.log(ret);
            })
        }

        function mx3d_secwindow(){

            MxFun.call('secwindow', '[]', function (ret) {;
                console.log(ret);
            });
            
        }
        function mx3d_drawTextTest(){

            MxFun.call('drawTextTest', '[]', function (ret) {
                console.log(ret);
            });

        }
        function mx3d_testTransf(){

            MxFun.call('testTransf', '[]', function (ret) {
                console.log(ret);
            });

        }
     

        function mx3d_3dDraw(){
              //alert("test3d");
            MxFun.call('TestDraw', '[]', function (ret) {
            });
         }

        function mx_deleteAll() {
             MxFun.deleteAll();
         }

         function mx_undo() {
             MxFun.undo();
         }

        function mx_save() {
            MxFun.save();
            alert("保存成功");
        }

        function mx2d_getAllObject() {
            MxFun.call('getAllObject', '[]', function (ret) {
                console.log(ret);
            });
        }

        var isHide = true;
        function testHideLayer() {


            MxFun.showLayer("轨道交通地下设施范围线",isHide,false)
            isHide = !isHide;
        }

        

        function  mx_test() {

            //MxFun.zoomScale(2);

            //my2d_dynDrawLenMark();

            /*
            MxFun.call('mxTest', '[]', function (ret) {
                console.log(ret);
          });
          */
            var paramobj = {};
            paramobj.handle = "1,7C";

            MxFun.call('mx_selectEntity',paramobj, function (ret) {
                console.log(ret);
            });

        }
    </script>
</body>
</html>
